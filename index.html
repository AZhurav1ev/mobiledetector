<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./codebase/webix.min.js"></script>
    <link rel="stylesheet" href="./codebase/webix.min.css">
    <title>Pdf download test</title>
</head>

<body>
    <script src="browser.js"></script>
    <script src="pdfdoc.js"></script>
    <script>
        function iosDownload(data, filename, mimetype) {
            if (!data) return;
            var blob = data.constructor !== Blob ? new Blob([data], { type: mimetype || 'application/octet-stream' }) : data;

            if (navigator.msSaveBlob) {
                navigator.msSaveBlob(blob, filename);
                return;
            }

            var lnk = document.createElement('a'),
                url = window.URL,
                objectURL;

            if (mimetype) {
                lnk.type = mimetype;
            }

            lnk.download = filename || 'untitled';
            lnk.href = objectURL = url.createObjectURL(blob);
            lnk.dispatchEvent(new MouseEvent('click'));
            setTimeout(url.revokeObjectURL.bind(url, objectURL));
        }
    </script>


    <script>
        webix.ready(function () {
            webix.ui({
                cols: [
                    {},
                    {
                        rows: [
                            { template: `version 703 v1.5`, autoheight: true },
                            { view: "pdfbar", id: "toolbar" },
                            {
                                view: "pdfviewer",
                                id: "pdf",
                                toolbar: "toolbar",

                            },
                        ]
                    },
                    {}
                ]
            });
            setTimeout(() => {
                $$("pdf").parse({ "data": atob(pdfDoc) });
            }, 100);
        });
    </script>
</body>

</html>